import{_ as s,o as n,c as a,O as l}from"./chunks/framework.4afe7240.js";const p="/assets/20230606144440488.ba3117c2.png",B=JSON.parse('{"title":"交叉编译Makefile文件配置","description":"","frontmatter":{"tags":"待成文","title":"交叉编译Makefile文件配置","date":"2023-06-06T00:00:00.000Z"},"headers":[],"relativePath":"pages/交叉编译Makefile文件配置.md","filePath":"pages/交叉编译Makefile文件配置.md","lastUpdated":1686070363000}'),o={name:"pages/交叉编译Makefile文件配置.md"},e=l(`<h1 id="交叉编译makefile文件配置" tabindex="-1">交叉编译Makefile文件配置 <a class="header-anchor" href="#交叉编译makefile文件配置" aria-label="Permalink to &quot;交叉编译Makefile文件配置&quot;">​</a></h1><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#指定编译的文件名</span></span>
<span class="line"><span style="color:#A6ACCD;">NAME</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">asm-led</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#指定当前是使用的交叉编译工具链前缀</span></span>
<span class="line"><span style="color:#FFCB6B;">CROSS_COMPILE</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arm-linux-gnueabihf-</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#指定使用的编译器为交叉编译工具链的gcc</span></span>
<span class="line"><span style="color:#FFCB6B;">CC</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">CROSS_COMPILE</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">gcc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#指定当前使用的链接器为交叉编译工具链的链接</span></span>
<span class="line"><span style="color:#FFCB6B;">LD</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">CROSS_COMPILE</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">ld</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#编译时加了这个参数作用是将二进制文件编译生成二进制的bin文件</span></span>
<span class="line"><span style="color:#FFCB6B;">OBJCOPY</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">CROSS_COMPILE</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">objcopy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#编译时加了这个参数作用是进行反汇编编译，生成一个.dis后缀的反汇编文件</span></span>
<span class="line"><span style="color:#FFCB6B;">OBJDUMP</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">CROSS_COMPILE</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">objdump</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">all:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;"> #编译生成二进制的文件，没有链接</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">-O0设置优先级最低</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g表示允许二进制文件支持GDB调试</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">$(CC</span><span style="color:#A6ACCD;">) -O0 -g -c </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.S -o </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.o</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#链接.o文件生成一个二进制的elf文件	-Ttext=0xC0008000表示将程序加载到内存的0XC0008000位置</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">$(LD</span><span style="color:#A6ACCD;">) -Ttext=0xC0008000 </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.o -o </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.elf </span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#将elf的可执行文件编译成.bin的二进制文件，这个后缀的文件可以之家下载到开发板，被处理器解析	</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">$(OBJCOPY</span><span style="color:#A6ACCD;">) -O binary </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.elf  </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.bin</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#生成反汇编文件</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">$(OBJDUMP</span><span style="color:#A6ACCD;">) -D </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.elf </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">.dis</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#FFCB6B;">clean:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.elf</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.bin</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.o</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.dis</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">install:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;"> #将bin二进制文件复制到共享文件夹</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">NAME</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">.bin</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">/mnt/hgfs/share1/</span></span></code></pre></div><p>为什么要LD到 0xC0008000 #待收录</p><p><img src="`+p+'" alt=""></p>',4),t=[e];function c(C,r,y,D,A,F){return n(),a("div",null,t)}const E=s(o,[["render",c]]);export{B as __pageData,E as default};
