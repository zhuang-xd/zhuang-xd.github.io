<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux内核移植 | blog</title>
    <meta name="description" content="晓栋的博客">
    <link rel="preload stylesheet" href="/assets/style.4e78a969.css" as="style">
    <script type="module" src="/assets/app.07f7caf0.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.5a3bb230.js">
  <link rel="modulepreload" href="/assets/chunks/theme.76cba639.js">
  <link rel="modulepreload" href="/assets/pages_Linux内核移植.md.ed003035.lean.js">
  <link rel="icon" href="/images/favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b8b11faa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-b8b11faa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar" data-v-7e5bc4a5 data-v-7683ced7><div class="container" data-v-7683ced7><div class="title" data-v-7683ced7><div class="VPNavBarTitle" data-v-7683ced7 data-v-4d981103><a class="title" href="/" data-v-4d981103><!--[--><!--]--><!--[--><img class="VPImage logo" src="/images/logo.gif" alt data-v-6db2186b><!--]--><!--[-->晓栋&#39;s blog<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-7683ced7><div class="curtain" data-v-7683ced7></div><div class="content-body" data-v-7683ced7><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-7683ced7><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-7683ced7 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/%F0%9F%93%A6%E5%BD%92%E6%A1%A3.html" tabindex="0" data-v-7f418b0f data-v-5e623618 data-v-8f4dc553><!--[-->归档<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-7683ced7 data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-7683ced7 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink" href="https://github.com/zhuang-xd" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-7683ced7 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink" href="https://github.com/zhuang-xd" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-36371990><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-7683ced7 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-9a431c33><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _pages_Linux%E5%86%85%E6%A0%B8%E7%A7%BB%E6%A4%8D" data-v-c4b0d3cf><div><h1 id="linux内核移植" tabindex="-1">Linux内核移植 <a class="header-anchor" href="#linux内核移植" aria-label="Permalink to &quot;Linux内核移植&quot;">​</a></h1><h2 id="分析内核源码" tabindex="-1">分析内核源码 <a class="header-anchor" href="#分析内核源码" aria-label="Permalink to &quot;分析内核源码&quot;">​</a></h2><blockquote><p>下载源码 <a href="https://st.com/content/ccc/resource/technical/sw-updater/firmware2/group0/2b/04/61/eb/4c/83/4d/3d/stm32cube_standard_a7_bsp_components_tf_a/files/SOURCES-tf-a-stm32mp1-openstlinux-5-10-dunfell-mp1-21-11-17_tar.xz/_jcr_content/translations/en.SOURCES-tf-a-stm32mp1-openstlinux-5-10-dunfell-mp1-21-11-17_tar.xz" target="_blank" rel="noreferrer">en.SOURCES-stm32mp1-openstlinux-5.10-dunfell-mp1-21-11-17_tar_v3.1.0.xz</a></p></blockquote><h3 id="阅读-readme" tabindex="-1">阅读 README <a class="header-anchor" href="#阅读-readme" aria-label="Permalink to &quot;阅读 README&quot;">​</a></h3><blockquote><p><code>stm32mp1-openstlinux-5.10-dunfell-mp1-21-11-17/sources/arm-ostl-linux-gnueabi/linux-stm32mp-5.10.61-stm32mp-r2-r0\README.HOW_TO.txt</code></p></blockquote><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Compilation of kernel:</span></span>
<span class="line"><span style="color:#A6ACCD;">1. Pre-requisite</span></span>
<span class="line"><span style="color:#A6ACCD;">2. Initialise cross-compilation via SDK</span></span>
<span class="line"><span style="color:#A6ACCD;">3. Prepare kernel source code</span></span>
<span class="line"><span style="color:#A6ACCD;">4. Manage the kernel source code</span></span>
<span class="line"><span style="color:#A6ACCD;">5. Configure kernel source code</span></span>
<span class="line"><span style="color:#A6ACCD;">6. Compile kernel source code</span></span>
<span class="line"><span style="color:#A6ACCD;">7. Update software on board</span></span></code></pre></div><ol><li>需要安装库信息：</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Ubuntu:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">apt-get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">u-boot-tools</span></span></code></pre></div><ol start="2"><li>解压内核源码</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xfJ</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux-5.10.61.tar.xz</span></span></code></pre></div><ol start="3"><li>进入内核源码目录</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux-5.10.61</span></span></code></pre></div><ol start="4"><li>对内核源码进行打补丁</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#FFCB6B;">ls</span><span style="color:#C3E88D;"> -1 ../</span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.patch</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">do</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">patch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> $p</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">done</span></span></code></pre></div><ol start="5"><li>配置补丁文件列表的相关信息</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ARCH=arm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">multi_v7_defconfig</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fragment</span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.config</span></span></code></pre></div><ol start="6"><li>编译内核源码</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ARCH=arm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uImage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vmlinux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">dtbs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">LOADADDR=</span><span style="color:#F78C6C;">0xC2000040</span></span></code></pre></div><ol start="7"><li>采用模块化方式进行编译</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ARCH=arm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span></span></code></pre></div><ol start="8"><li>产生文件路径： <ul><li>uImage镜像文件：内核源码/arch/arm/boot/uImage</li><li>设备树镜像文件：内核源码/arch/arm/boot/dts/st*.dtb</li></ul></li></ol><h3 id="内核目录" tabindex="-1">内核目录 <a class="header-anchor" href="#内核目录" aria-label="Permalink to &quot;内核目录&quot;">​</a></h3><ol><li>对内核源码进行解压</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/FSMP1A/linux-stm32mp-5.10.61-stm32mp-r2-r0</span></span>
<span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-vxf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux-5.10.61.tar.xz</span></span></code></pre></div><ol start="2"><li>进入linux内核源码目录下</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux-5.10.61/</span></span></code></pre></div><ol start="3"><li>目录介绍</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">arch</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">存放各个架构的内容</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">arm/X86架构</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">block</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">块设备相关内容</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">certs</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">列表信息</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">COPYING</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">内核描述文档</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">CREDITS</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">内核贡献者列表</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">Documentation--------&gt;内核帮助文档（所以内核的信息都可以在这个帮助文档中找到）</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">drivers</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">驱动相关代码</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">fs</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">文件系统相关代码</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">include</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">内核中头文件目录</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">init</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">内核初始化相关代码</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">ipc--------&gt;内核中进程间通信相关代码</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">Kbuild</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">Makefile会调用这个文件完成内核编译</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">Kconfig</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">生成基于图形化菜单界面信息</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">menuconfig</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">lib</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">内核库相关信息</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">LICENSES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">遵循GPL协议</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">MAINTAINERS</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">内核当前贡献者列表</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">Makefile</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">工程管理文件</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">scripts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">和编译相关目录（shell脚本）</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">security--------&gt;内核安全相关代码</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">tools--------&gt;内核源码工具目录</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">crypto</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">内核加密算法</span></span></code></pre></div><h2 id="移植内核" tabindex="-1">移植内核 <a class="header-anchor" href="#移植内核" aria-label="Permalink to &quot;移植内核&quot;">​</a></h2><h3 id="编译内核" tabindex="-1">编译内核 <a class="header-anchor" href="#编译内核" aria-label="Permalink to &quot;编译内核&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">1.进入linux内核源码目录，配置交叉编译工具链，打开Makefile文件，搜索：CROSS_COMPILE</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">370</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ARCH</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">?=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">SUBARCH</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">371</span><span style="color:#A6ACCD;">      </span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">更改为：</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">370</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ARCH</span><span style="color:#A6ACCD;">        </span><span style="color:#C3E88D;">?=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arm</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">371</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">CROSS_COMPILE</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arm-linux-gnueabihf-</span><span style="color:#A6ACCD;">                      </span></span>
<span class="line"><span style="color:#FFCB6B;">2.对内核源码进行打补丁</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#FFCB6B;">ls</span><span style="color:#C3E88D;"> -1 ../</span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.patch</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">do</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">patch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> $p</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">done</span></span>
<span class="line"><span style="color:#FFCB6B;">3.配置补丁文件列表的相关信息</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ARCH=arm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">multi_v7_defconfig</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fragment</span><span style="color:#A6ACCD;">*</span><span style="color:#C3E88D;">.config</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">成功现象：</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># configuration written to .config </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#FFCB6B;">4.因为FSMP1A开发板是参考DK1平台进行设计，所以将DK1公板设备树相关内容，复制为FSMP1A设备树</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">1）进入linux-5.10.61/arch/arm/boot/dts设备树目录，复制相关内容</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stm32mp157a-dk1.dts</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">stm32mp157a-fsmp1a.dts</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stm32mp15xx-dkx.dtsi</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">stm32mp15xx-fsmp1x.dtsi</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">2）进入linux-5.10.61/arch/arm/boot/dts设备树目录，打开</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stm32mp157a-fsmp1a.dts</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">13</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#include &quot;stm32mp15xx-fsmp1x.dtsi&quot;  --------&gt; 这一行为修改内容 </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">14</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">15</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">16</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">model</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">HQYJ STM32MP157A-FSMP1A Discovery Board</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">--------&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">这一行为修改内容</span><span style="color:#A6ACCD;">                                                     </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">17</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">compatible</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hqyj,stm32mp157a-fsmp1a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hqyj,stm32mp157</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">--------&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">这一行为修改内容</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">3）进入linux-5.10.61/arch/arm/boot/dts设备树目录，打开</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Makefile</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">1097</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">stm32mp157a-dk1.dtb</span><span style="color:#A6ACCD;"> \</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">1098</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">stm32mp157a-fsmp1a.dtb</span><span style="color:#A6ACCD;"> \    </span><span style="color:#C3E88D;">--------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">这一行为修改内容</span><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#FFCB6B;">5.在内核源码目录下，编译内核源码</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">time</span><span style="color:#A6ACCD;"> make -j4 ARCH=arm uImage vmlinux dtbs LOADADDR=0xC2000000 </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">解释：</span></span>
<span class="line"><span style="color:#A6ACCD;">     time：显示编译时间</span></span>
<span class="line"><span style="color:#A6ACCD;">     ARCH</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">arm：指定arm架构</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">uImage：编译生成uImage镜像文件</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#FFCB6B;">vmlinux：elf可执行文件</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">dtbs：编译设备树</span></span>
<span class="line"><span style="color:#A6ACCD;">         LOADADDR</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0xC2000000</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">：指定加载地址</span></span>
<span class="line"><span style="color:#FFCB6B;">6.成功现象：</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">OBJCOPY</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arch/arm/boot/zImage</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Kernel:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arch/arm/boot/zImage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ready</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">UIMAGE</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">arch/arm/boot/uImage</span></span>
<span class="line"><span style="color:#FFCB6B;">Image</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Name:</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">Linux-5.10.61</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">Created:</span><span style="color:#A6ACCD;">      </span><span style="color:#C3E88D;">Wed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Jun</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">21</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17</span><span style="color:#C3E88D;">:04:58</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2023</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">Image</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Type:</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">ARM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Kernel</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Image</span><span style="color:#A6ACCD;"> (uncompressed) </span></span>
<span class="line"><span style="color:#FFCB6B;">Data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Size:</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">7172008</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Bytes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7003.91</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">KiB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6.84</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MiB</span></span>
<span class="line"><span style="color:#FFCB6B;">Load</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Address:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">c2000000</span></span>
<span class="line"><span style="color:#FFCB6B;">Entry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Point:</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">c2000000</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Kernel:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arch/arm/boot/uImage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">readyreal</span><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">5</span><span style="color:#C3E88D;">m46.234s</span></span>
<span class="line"><span style="color:#FFCB6B;">user</span><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">19</span><span style="color:#C3E88D;">m0.143s</span></span>
<span class="line"><span style="color:#FFCB6B;">sys</span><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">2</span><span style="color:#C3E88D;">m3.807s</span></span></code></pre></div><h4 id="测试" tabindex="-1">测试 <a class="header-anchor" href="#测试" aria-label="Permalink to &quot;测试&quot;">​</a></h4><p>报错显示网络设备不存在 <img src="/assets/20230625223640018.59cbfd6c.png" alt=""></p><h3 id="移植网卡驱动" tabindex="-1">移植网卡驱动 <a class="header-anchor" href="#移植网卡驱动" aria-label="Permalink to &quot;移植网卡驱动&quot;">​</a></h3><p>设置 Ubuntu 的 IP 地址，新添加一个网络，手动分配地址</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">192.168.1.200</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#本机IP地址</span></span>
<span class="line"><span style="color:#FFCB6B;">255.255.255.0</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#子网掩码</span></span>
<span class="line"><span style="color:#FFCB6B;">192.168.1.1</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#网关地址</span></span>
<span class="line"><span style="color:#FFCB6B;">8.8.8.8</span><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">#DNS</span></span></code></pre></div><p>开发板设置静态IP</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">setenv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ipaddr</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.100</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">#设置开发板的 IP 地址</span></span>
<span class="line"><span style="color:#FFCB6B;">setenv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">serverip</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.200</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#指定服务器 IP 地址</span></span>
<span class="line"><span style="color:#FFCB6B;">setenv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gatewayip</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.1</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#指定网络网关的 IP 地址</span></span>
<span class="line"><span style="color:#FFCB6B;">setenv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">netmask</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">255.255</span><span style="color:#C3E88D;">.255.0</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#指定子网掩码</span></span>
<span class="line"><span style="color:#FFCB6B;">saveenv</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;font-style:italic;">#保存设置</span></span></code></pre></div><p>测试开发板网络</p><blockquote><p>在开发板上 ping 服务器的 IP 地址</p></blockquote><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ping</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.200</span></span></code></pre></div><p>显示结果如下，即为组内网成功</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Using</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ethernet@5800a000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">device</span></span>
<span class="line"><span style="color:#FFCB6B;">host</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.200</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">alive</span></span></code></pre></div><h4 id="测试-1" tabindex="-1">测试 <a class="header-anchor" href="#测试-1" aria-label="Permalink to &quot;测试&quot;">​</a></h4><p>报错显示由热插拔问题 <img src="/assets/20230625223629714.9244a4f1.png" alt=""></p><h3 id="解决热插拔问题" tabindex="-1">解决热插拔问题 <a class="header-anchor" href="#解决热插拔问题" aria-label="Permalink to &quot;解决热插拔问题&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Device</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Drivers</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">---</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Generic</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Driver</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Options</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">---</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">[*]</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Support</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uevent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">helper</span><span style="color:#A6ACCD;">                                                           </span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">/sbin/hotplug</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">path</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uevent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">helper</span></span></code></pre></div><h4 id="测试-2" tabindex="-1">测试 <a class="header-anchor" href="#测试-2" aria-label="Permalink to &quot;测试&quot;">​</a></h4><p>成功进入linux内核 <img src="/assets/20230625223623277.36e13dbd.png" alt=""></p><h2 id="led例程-📣" tabindex="-1">LED例程 📣 <a class="header-anchor" href="#led例程-📣" aria-label="Permalink to &quot;LED例程  📣&quot;">​</a></h2><blockquote><p><strong>1. 内核裁剪指的是什么</strong> 需要模块进行编译，不需要的模块不进行编译 <strong>2. 如何对内核进行裁剪</strong> 通过make menuconfig命令</p></blockquote><h3 id="图形化界面信息配置" tabindex="-1">图形化界面信息配置 <a class="header-anchor" href="#图形化界面信息配置" aria-label="Permalink to &quot;图形化界面信息配置&quot;">​</a></h3><h3 id="驱动模块化编译" tabindex="-1">驱动模块化编译 <a class="header-anchor" href="#驱动模块化编译" aria-label="Permalink to &quot;驱动模块化编译&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">0.在内核源码目录下，编译内核源码</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">time</span><span style="color:#A6ACCD;"> make -j4 ARCH=arm uImage vmlinux dtbs LOADADDR=0xC2000000 </span></span>
<span class="line"><span style="color:#FFCB6B;">1.采用模块化方式进行编译</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-j4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">modules</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">成功现象：</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">LD</span><span style="color:#A6ACCD;"> [M]  drivers/char/fsmp157a_led.ko</span></span>
<span class="line"><span style="color:#FFCB6B;">2.将linux内核源码编译生成的uImage镜像文件和设备树镜像文件拷贝到~/tftpboot目录下</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/FSMP1A/linux-stm32mp-5.10.61-stm32mp-r2-r0/linux-5.10.61</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arch/arm/boot/uImage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/tftpboot/</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arch/arm/boot/dts/stm32mp157a-fsmp1a.dtb</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/tftpboot/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">cp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">drivers/char/fsmp157a_led.ko</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/nfs/rootfs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---------</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">以及采用模块化方式编译的文件，拷贝到~/nfs/rootfs</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.设置bootcmd参数：自启动命令</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">FSMP1A&gt;</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">setenv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bootcmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tftp</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xc2000000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uImage</span><span style="color:#A6ACCD;">\;</span><span style="color:#C3E88D;">tftp</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xc4000000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stm32mp157a-fsmp1a.dtb</span><span style="color:#A6ACCD;">\;</span><span style="color:#C3E88D;">bootm</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xc2000000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xc4000000</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">FSMP1A&gt;</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">saveenv</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">Saving</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Environment</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MMC...</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Writing</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redundant</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MMC</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">...</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">4.设置bootargs参数：自启动参数</span></span>
<span class="line"><span style="color:#FFCB6B;">FSMP1A&gt;</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">setenv</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bootargs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root=/dev/nfs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nfsroot=</span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.250:/home/linux/nfs/rootfs,tcp,v4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rw</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">console=ttySTM0,115200</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init=/linuxrc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ip=</span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.100</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">FSMP1A&gt;</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">saveenv</span></span>
<span class="line"><span style="color:#FFCB6B;">Saving</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Environment</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MMC...</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Writing</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MMC</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">1</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">...</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">OK</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">解释：</span></span>
<span class="line"><span style="color:#A6ACCD;">    root</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/dev/nfs：使用nfs服务器</span></span>
<span class="line"><span style="color:#A6ACCD;">    nfsroot</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.250:/home/linux/nfs/rootfs：挂载的ip地址以及路径，每个人ip地址，以及路径需要编写自己设置！！！</span></span>
<span class="line"><span style="color:#A6ACCD;">     ip</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">192.168</span><span style="color:#C3E88D;">.1.100：板子的ip地址，每个人ip地址，需要编写自己设置！！！</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">5.重启开发板，进入自启动模式，安装led灯驱动</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@fsmp1a /</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"># insmod fsmp157a_led.ko </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">成功现象：[94.962918]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">drivers/char/fsmp157a_led.c:demo_init:185</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">6.运行应用层程序</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@fsmp1a /</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"># ./a.out </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">成功现象：</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">100.453837</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">drivers/char/fsmp157a_led.c:demo_open:40</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">100.458299</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0x0</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">100.460470</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">status</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0x30</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">100.462791</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">drivers/char/fsmp157a_led.c:demo_ioctl:107</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">7.卸载对应的驱动</span><span style="color:#A6ACCD;">    [root@fsmp1a </span><span style="color:#C3E88D;">/]#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rmmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fsmp157a_led</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">114.686809</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">drivers/char/fsmp157a_led.c:demo_exit:206</span></span></code></pre></div><h4 id="测试-3" tabindex="-1">测试 <a class="header-anchor" href="#测试-3" aria-label="Permalink to &quot;测试&quot;">​</a></h4><p><img src="/assets/20230625215605264.287a67a0.png" alt=""></p><h2 id="编译过程-📣" tabindex="-1">编译过程 📣 <a class="header-anchor" href="#编译过程-📣" aria-label="Permalink to &quot;编译过程 📣&quot;">​</a></h2><blockquote><ol><li>vmlinux</li><li>objcopy</li><li>Image</li><li>gzip</li><li>arch/arm/boot/compressed/vmlinux</li><li>objcopy</li><li>zImage</li><li>mkimage</li><li>uImage</li></ol></blockquote><p>#待学习</p><p>执行命令</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uImage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">LOADADDR=</span><span style="color:#F78C6C;">0xC2000000</span></span></code></pre></div><p>arch/arm目录下，打开Makefile文件，搜索：uImage</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">315</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">BOOT_TARGETS</span><span style="color:#A6ACCD;">    </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zImage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Image</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xipImage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bootpImage</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uImage</span></span>
<span class="line"><span style="color:#FFCB6B;">323</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">BOOT_TARGETS</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vmlinux</span></span>
<span class="line"><span style="color:#FFCB6B;">324</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">@echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">Q</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">325</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">@echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">MAKE</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">326</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">@echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">build</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">327</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">@echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">boot</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">328</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">@echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">MACHINE</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">329</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">@echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">boot</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">                                                                                             </span></span>
<span class="line"><span style="color:#FFCB6B;">330</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">@echo</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">$@</span></span>
<span class="line"><span style="color:#FFCB6B;">331</span><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">MAKE</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">build</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">=</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">boot</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">MACHINE=</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">MACHINE</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">boot</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;font-style:italic;">$@</span></span>
<span class="line"><span style="color:#FFCB6B;">332</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">@</span><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">kecho</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">  Kernel: $(boot)/$@ is ready</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><h3 id="kbuild-include" tabindex="-1">Kbuild.include <a class="header-anchor" href="#kbuild-include" aria-label="Permalink to &quot;Kbuild.include&quot;">​</a></h3><p>打开 Kbuild.include文件，查看编译过程</p><p><img src="/assets/20230625224252850.6e68be66.png" alt=""></p><h3 id="makefile-lib" tabindex="-1">Makefile.lib <a class="header-anchor" href="#makefile-lib" aria-label="Permalink to &quot;Makefile.lib&quot;">​</a></h3><p>检查加载地址</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@$(check_for_multiple_loadaddr</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>call是调用命令，调用if_changed命令</p><ul><li>Makefile.lib中包含了一些共用的编译规则和函数，用于简化内核代码的编译过程，其中就含有 cmd_uimage</li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">$(</span><span style="color:#FFCB6B;">call</span><span style="color:#C3E88D;"> if_changed,uimage</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> ——————————————</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">执行cmd_uimage</span></span></code></pre></div><p><strong>uImage是通过zImage得到，将zImage通过 mkimage这个工具添加64字节头部信息</strong></p><h3 id="arch-arm-boot-makefile" tabindex="-1">arch/arm/boot/Makefile <a class="header-anchor" href="#arch-arm-boot-makefile" aria-label="Permalink to &quot;arch/arm/boot/Makefile&quot;">​</a></h3><p>打开 arch/arm/boot/Makefile 文件，找到目标 <img src="/assets/20230625222600476.652d06bd.png" alt=""></p><p><strong>arch/arm/boot/compressed/vmlinux通过objcopy命令格式化转换为zImage</strong></p></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--]--><div class="edit-info" data-v-face870a><!----><div class="last-updated" data-v-face870a><p class="VPLastUpdated" data-v-face870a data-v-7b3ebfe1>Last updated: <time datetime="2023-06-25T15:13:12.000Z" data-v-7b3ebfe1></time></p></div></div><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><a class="pager-link prev" href="/pages/GoldenDict%E8%B0%83%E7%94%A8%E7%99%BE%E5%BA%A6%E9%A2%86%E5%9F%9F%E7%BF%BB%E8%AF%91api.html" data-v-face870a><span class="desc" data-v-face870a>Previous page</span><span class="title" data-v-face870a>GoldenDict调用百度领域翻译api</span></a></div><div class="has-prev pager" data-v-face870a><a class="pager-link next" href="/pages/Makefile%E8%A7%A3%E6%9E%90.html" data-v-face870a><span class="desc" data-v-face870a>Next page</span><span class="title" data-v-face870a>Makefile解析</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"beda322d\",\"about_📇站点日志.md\":\"6c894cb0\",\"pages_fs-mp1a v2.0 开发板.md\":\"461e4581\",\"pages_gun二进制工具集.md\":\"cb797cad\",\"journals_2023-06-25.md\":\"06cd6a03\",\"pages_goldendict调用百度领域翻译api.md\":\"48c3b60a\",\"pages_linux内核移植.md\":\"ed003035\",\"pages_系统移植课程考试-hqyj.md\":\"5441707a\",\"pages_根文件系统移植.md\":\"2333ac89\",\"pages_📇arm基础与接口技术课程-hqyj-胡月.md\":\"45b44fe8\",\"pages_📇系统移植课程-hqyj-胡月.md\":\"89958063\",\"pages_用github_action自动部署vitepress项目.md\":\"852d26ee\",\"pages_u-boot移植-trusted版本.md\":\"a0478675\",\"pages_u-boot移植-basic版本.md\":\"1861c579\",\"pages_📦归档.md\":\"4620891d\",\"public_templates_daily_template.md\":\"9e722515\",\"pages_tf-a移植.md\":\"294ce76b\",\"pages_makefile解析.md\":\"d3c974f7\",\"pages_搭建 tftp 服务器.md\":\"0bb9bedb\",\"pages_搭建 nfs 服务器.md\":\"461f16b9\",\"public_templates_mindmap_template.md\":\"b1914488\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"blog\",\"description\":\"晓栋的博客\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"晓栋's blog\",\"logo\":\"/images/logo.gif\",\"nav\":[{\"text\":\"归档\",\"link\":\"/pages/📦归档\"}],\"sidebar\":{\"/.obsidian/\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\".obsidian\",\"items\":[{\"link\":\"/.obsidian/app.json\",\"text\":\"app.json\"},{\"link\":\"/.obsidian/appearance.json\",\"text\":\"appearance.json\"},{\"link\":\"/.obsidian/backlink.json\",\"text\":\"backlink.json\"},{\"link\":\"/.obsidian/bookmarks.json\",\"text\":\"bookmarks.json\"},{\"link\":\"/.obsidian/canvas.json\",\"text\":\"canvas.json\"},{\"link\":\"/.obsidian/community-plugins.json\",\"text\":\"community-plugins.json\"},{\"link\":\"/.obsidian/core-plugins-migration.json\",\"text\":\"core-plugins-migration.json\"},{\"link\":\"/.obsidian/core-plugins.json\",\"text\":\"core-plugins.json\"},{\"link\":\"/.obsidian/daily-notes.json\",\"text\":\"daily-notes.json\"},{\"link\":\"/.obsidian/global-search.json\",\"text\":\"global-search.json\"},{\"link\":\"/.obsidian/graph.json\",\"text\":\"graph.json\"},{\"link\":\"/.obsidian/hotkeys.json\",\"text\":\"hotkeys.json\"},{\"link\":\"/.obsidian/starred.json\",\"text\":\"starred.json\"},{\"link\":\"/.obsidian/switcher.json\",\"text\":\"switcher.json\"},{\"link\":\"/.obsidian/templates.json\",\"text\":\"templates.json\"},{\"link\":\"/.obsidian/workspace\",\"text\":\"workspace\"},{\"link\":\"/.obsidian/workspace.json\",\"text\":\"workspace.json\"},{\"link\":\"/.obsidian/workspaces.json\",\"text\":\"workspaces.json\"},{\"link\":\"/.obsidian/zk-prefixer.json\",\"text\":\"zk-prefixer.json\"}]},{\"collapsed\":false,\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"snippets\",\"items\":[{\"link\":\"/.obsidian/snippets/mado11.css\",\"text\":\"mado11.css\"},{\"link\":\"/.obsidian/snippets/my-mado.css\",\"text\":\"my-mado.css\"},{\"link\":\"/.obsidian/snippets/my-madomini.css\",\"text\":\"my-madomini.css\"},{\"link\":\"/.obsidian/snippets/my-ob-nord.css\",\"text\":\"my-ob-nord.css\"},{\"link\":\"/.obsidian/snippets/my-style.css\",\"text\":\"my-style.css\"}]},{\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"wikilinks-to-mdlinks-obsidian\",\"items\":[{\"link\":\"/.obsidian/plugins/wikilinks-to-mdlinks-obsidian/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/wikilinks-to-mdlinks-obsidian/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"terminal\",\"items\":[{\"link\":\"/.obsidian/plugins/terminal/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/terminal/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/terminal/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/terminal/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"templater-obsidian\",\"items\":[{\"link\":\"/.obsidian/plugins/templater-obsidian/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/templater-obsidian/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/templater-obsidian/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/templater-obsidian/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"tag-wrangler\",\"items\":[{\"link\":\"/.obsidian/plugins/tag-wrangler/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/tag-wrangler/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/tag-wrangler/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"table-editor-obsidian\",\"items\":[{\"link\":\"/.obsidian/plugins/table-editor-obsidian/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/table-editor-obsidian/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/table-editor-obsidian/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/table-editor-obsidian/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"settings-search\",\"items\":[{\"link\":\"/.obsidian/plugins/settings-search/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/settings-search/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/settings-search/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"recent-files-obsidian\",\"items\":[{\"link\":\"/.obsidian/plugins/recent-files-obsidian/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/recent-files-obsidian/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/recent-files-obsidian/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/recent-files-obsidian/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"quickadd\",\"items\":[{\"link\":\"/.obsidian/plugins/quickadd/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/quickadd/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/quickadd/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/quickadd/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"open-vscode\",\"items\":[{\"link\":\"/.obsidian/plugins/open-vscode/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/open-vscode/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-timeline\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-timeline/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-timeline/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-timeline/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-tasks-plugin\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-tasks-plugin/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-tasks-plugin/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-tasks-plugin/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-system-dark-mode\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-system-dark-mode/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-system-dark-mode/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-system-dark-mode/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-shellcommands\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-shellcommands/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-shellcommands/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-shellcommands/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-shellcommands/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-regex-replace\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-regex-replace/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-regex-replace/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-regex-replace/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-regex-replace/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-proxy-github\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-proxy-github/README\",\"text\":\"README\"},{\"link\":\"/.obsidian/plugins/obsidian-proxy-github/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-proxy-github/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-proxy-github/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-paste-image-rename\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-paste-image-rename/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-paste-image-rename/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-paste-image-rename/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-paste-image-rename/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-outliner\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-outliner/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-outliner/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-outliner/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-mindmap-nextgen\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-mindmap-nextgen/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-mindmap-nextgen/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-mindmap-nextgen/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-mindmap-nextgen/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-mind-map\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-mind-map/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-mind-map/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-markmind\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-markmind/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-markmind/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-markmind/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-markmind/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-linter\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-linter/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-linter/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-linter/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-linter/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-kanban\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-kanban/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-kanban/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-kanban/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-kanban/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-jump-to-date-plugin\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-jump-to-date-plugin/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-jump-to-date-plugin/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-jump-to-date-plugin/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-jump-to-date-plugin/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-image-toolkit\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-image-toolkit/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-image-toolkit/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-image-toolkit/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-hotkeys-for-specific-files\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-hotkeys-for-specific-files/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-hotkeys-for-specific-files/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-hotkeys-for-specific-files/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-heading-shifter\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-heading-shifter/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-heading-shifter/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-heading-shifter/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-file-cleaner\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-file-cleaner/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-file-cleaner/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-excalidraw-plugin\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-excalidraw-plugin/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-excalidraw-plugin/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-excalidraw-plugin/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-excalidraw-plugin/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"obsidian-better-code-block\",\"items\":[{\"link\":\"/.obsidian/plugins/obsidian-better-code-block/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/obsidian-better-code-block/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/obsidian-better-code-block/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/obsidian-better-code-block/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"mousewheel-image-zoom\",\"items\":[{\"link\":\"/.obsidian/plugins/mousewheel-image-zoom/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/mousewheel-image-zoom/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/mousewheel-image-zoom/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"homepage\",\"items\":[{\"link\":\"/.obsidian/plugins/homepage/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/homepage/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/homepage/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"emoji-shortcodes\",\"items\":[{\"link\":\"/.obsidian/plugins/emoji-shortcodes/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/emoji-shortcodes/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/emoji-shortcodes/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"dataview\",\"items\":[{\"link\":\"/.obsidian/plugins/dataview/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/dataview/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/dataview/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"cm-editor-syntax-highlight-obsidian\",\"items\":[{\"link\":\"/.obsidian/plugins/cm-editor-syntax-highlight-obsidian/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/cm-editor-syntax-highlight-obsidian/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/plugins/cm-editor-syntax-highlight-obsidian/styles.css\",\"text\":\"styles.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"calendar\",\"items\":[{\"link\":\"/.obsidian/plugins/calendar/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/calendar/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/calendar/manifest.json\",\"text\":\"manifest.json\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"auto-note-mover\",\"items\":[{\"link\":\"/.obsidian/plugins/auto-note-mover/data.json\",\"text\":\"data.json\"},{\"link\":\"/.obsidian/plugins/auto-note-mover/main.js\",\"text\":\"main.js\"},{\"link\":\"/.obsidian/plugins/auto-note-mover/manifest.json\",\"text\":\"manifest.json\"}]}],\"text\":\"plugins\"},{\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"Things\",\"items\":[{\"link\":\"/.obsidian/themes/Things/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Things/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Shimmering Focus\",\"items\":[{\"link\":\"/.obsidian/themes/Shimmering Focus/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Shimmering Focus/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Pink Topaz\",\"items\":[{\"link\":\"/.obsidian/themes/Pink Topaz/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Pink Topaz/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Obsidianite\",\"items\":[{\"link\":\"/.obsidian/themes/Obsidianite/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Obsidianite/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Obsidian Nord\",\"items\":[{\"link\":\"/.obsidian/themes/Obsidian Nord/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Obsidian Nord/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Nightingale\",\"items\":[{\"link\":\"/.obsidian/themes/Nightingale/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Nightingale/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Night Owl\",\"items\":[{\"link\":\"/.obsidian/themes/Night Owl/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Night Owl/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Mado Miniflow\",\"items\":[{\"link\":\"/.obsidian/themes/Mado Miniflow/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Mado Miniflow/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Mado 11\",\"items\":[{\"link\":\"/.obsidian/themes/Mado 11/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Mado 11/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Golden Topaz\",\"items\":[{\"link\":\"/.obsidian/themes/Golden Topaz/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Golden Topaz/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Everblush\",\"items\":[{\"link\":\"/.obsidian/themes/Everblush/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Everblush/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Dracula Official\",\"items\":[{\"link\":\"/.obsidian/themes/Dracula Official/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Dracula Official/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Dawn\",\"items\":[{\"link\":\"/.obsidian/themes/Dawn/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Dawn/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Cybertron Shifted\",\"items\":[{\"link\":\"/.obsidian/themes/Cybertron Shifted/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Cybertron Shifted/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Catppuccin\",\"items\":[{\"link\":\"/.obsidian/themes/Catppuccin/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Catppuccin/theme.css\",\"text\":\"theme.css\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"Atom\",\"items\":[{\"link\":\"/.obsidian/themes/Atom/manifest.json\",\"text\":\"manifest.json\"},{\"link\":\"/.obsidian/themes/Atom/theme.css\",\"text\":\"theme.css\"}]}],\"text\":\"themes\"}],\"collapsible\":true,\"text\":\".obsidian\"}],\"/.vitepress/\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\".vitepress\",\"items\":[{\"link\":\"/.vitepress/config.ts\",\"text\":\"config.ts\"}]},{\"collapsed\":false,\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"theme\",\"items\":[{\"link\":\"/.vitepress/theme/index.ts\",\"text\":\"index.ts\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"dist\",\"items\":[{\"link\":\"/.vitepress/dist/404.html\",\"text\":\"404.html\"},{\"link\":\"/.vitepress/dist/hashmap.json\",\"text\":\"hashmap.json\"},{\"link\":\"/.vitepress/dist/index.html\",\"text\":\"index.html\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"configs\",\"items\":[{\"link\":\"/.vitepress/configs/AutoNavSidebar.js\",\"text\":\"AutoNavSidebar.js\"},{\"link\":\"/.vitepress/configs/nav.js\",\"text\":\"nav.js\"}]},{\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"deps\",\"items\":[{\"link\":\"/.vitepress/cache/deps/_metadata.json\",\"text\":\"_metadata.json\"},{\"link\":\"/.vitepress/cache/deps/package.json\",\"text\":\"package.json\"},{\"link\":\"/.vitepress/cache/deps/vue.js\",\"text\":\"vue.js\"},{\"link\":\"/.vitepress/cache/deps/vue.js.map\",\"text\":\"vue.js.map\"}]}],\"text\":\"cache\"},{\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"templates\",\"items\":[{\"link\":\"/.vitepress/dist/templates/daily_template\",\"text\":\"daily_template\"},{\"link\":\"/.vitepress/dist/templates/mindmap_template\",\"text\":\"mindmap_template\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"pages\",\"items\":[{\"link\":\"/.vitepress/dist/pages/FS-MP1A V2.0 开发板.html\",\"text\":\"FS-MP1A V2.0 开发板.html\"},{\"link\":\"/.vitepress/dist/pages/GUN二进制工具集.html\",\"text\":\"GUN二进制工具集.html\"},{\"link\":\"/.vitepress/dist/pages/GoldenDict调用百度领域翻译api.html\",\"text\":\"GoldenDict调用百度领域翻译api.html\"},{\"link\":\"/.vitepress/dist/pages/Linux内核移植.html\",\"text\":\"Linux内核移植.html\"},{\"link\":\"/.vitepress/dist/pages/Makefile解析.html\",\"text\":\"Makefile解析.html\"},{\"link\":\"/.vitepress/dist/pages/TF-A移植.html\",\"text\":\"TF-A移植.html\"},{\"link\":\"/.vitepress/dist/pages/u-boot移植-basic版本.html\",\"text\":\"u-boot移植-basic版本.html\"},{\"link\":\"/.vitepress/dist/pages/u-boot移植-trusted版本.html\",\"text\":\"u-boot移植-trusted版本.html\"},{\"link\":\"/.vitepress/dist/pages/搭建 NFS 服务器.html\",\"text\":\"搭建 NFS 服务器.html\"},{\"link\":\"/.vitepress/dist/pages/搭建 TFTP 服务器.html\",\"text\":\"搭建 TFTP 服务器.html\"},{\"link\":\"/.vitepress/dist/pages/根文件系统移植.html\",\"text\":\"根文件系统移植.html\"},{\"link\":\"/.vitepress/dist/pages/用github_action自动部署vitepress项目.html\",\"text\":\"用github_action自动部署vitepress项目.html\"},{\"link\":\"/.vitepress/dist/pages/系统移植课程考试-HQYJ.html\",\"text\":\"系统移植课程考试-HQYJ.html\"},{\"link\":\"/.vitepress/dist/pages/📇ARM基础与接口技术课程-HQYJ-胡月.html\",\"text\":\"📇ARM基础与接口技术课程-HQYJ-胡月.html\"},{\"link\":\"/.vitepress/dist/pages/📇系统移植课程-HQYJ-胡月.html\",\"text\":\"📇系统移植课程-HQYJ-胡月.html\"},{\"link\":\"/.vitepress/dist/pages/📦归档.html\",\"text\":\"📦归档.html\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"mindmap\",\"items\":[{\"link\":\"/.vitepress/dist/mindmap/day02_shell命令.html\",\"text\":\"day02_shell命令.html\"},{\"link\":\"/.vitepress/dist/mindmap/day03_shell脚本.html\",\"text\":\"day03_shell脚本.html\"},{\"link\":\"/.vitepress/dist/mindmap/day04_shell脚本.html\",\"text\":\"day04_shell脚本.html\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"journals\",\"items\":[{\"link\":\"/.vitepress/dist/journals/2023-06-25.html\",\"text\":\"2023-06-25.html\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"images\",\"items\":[{\"link\":\"/.vitepress/dist/images/favicon.ico\",\"text\":\"favicon.ico\"},{\"link\":\"/.vitepress/dist/images/home.gif\",\"text\":\"home.gif\"},{\"link\":\"/.vitepress/dist/images/logo.gif\",\"text\":\"logo.gif\"}]},{\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"templates\",\"items\":[{\"link\":\"/.vitepress/dist/public/templates/daily_template.html\",\"text\":\"daily_template.html\"},{\"link\":\"/.vitepress/dist/public/templates/mindmap_template.html\",\"text\":\"mindmap_template.html\"}]}],\"text\":\"public\"}],\"text\":\"dist\"},{\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"styles\",\"items\":[{\"link\":\"/.vitepress/theme/styles/style.scss\",\"text\":\"style.scss\"},{\"link\":\"/.vitepress/theme/styles/vars.scss\",\"text\":\"vars.scss\"}]}],\"text\":\"theme\"}],\"collapsible\":true,\"text\":\".vitepress\"}],\"/journals/\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"journals\",\"items\":[{\"link\":\"/journals/2023-06-25\",\"text\":\"2023-06-25\"}]}],\"/pages/\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"pages\",\"items\":[{\"link\":\"/pages/FS-MP1A V2.0 开发板\",\"text\":\"FS-MP1A V2.0 开发板\"},{\"link\":\"/pages/GUN二进制工具集\",\"text\":\"GUN二进制工具集\"},{\"link\":\"/pages/GoldenDict调用百度领域翻译api\",\"text\":\"GoldenDict调用百度领域翻译api\"},{\"link\":\"/pages/Linux内核移植\",\"text\":\"Linux内核移植\"},{\"link\":\"/pages/Makefile解析\",\"text\":\"Makefile解析\"},{\"link\":\"/pages/TF-A移植\",\"text\":\"TF-A移植\"},{\"link\":\"/pages/u-boot移植-basic版本\",\"text\":\"u-boot移植-basic版本\"},{\"link\":\"/pages/u-boot移植-trusted版本\",\"text\":\"u-boot移植-trusted版本\"},{\"link\":\"/pages/搭建 NFS 服务器\",\"text\":\"搭建 NFS 服务器\"},{\"link\":\"/pages/搭建 TFTP 服务器\",\"text\":\"搭建 TFTP 服务器\"},{\"link\":\"/pages/根文件系统移植\",\"text\":\"根文件系统移植\"},{\"link\":\"/pages/用github_action自动部署vitepress项目\",\"text\":\"用github_action自动部署vitepress项目\"},{\"link\":\"/pages/系统移植课程考试-HQYJ\",\"text\":\"系统移植课程考试-HQYJ\"},{\"link\":\"/pages/📇ARM基础与接口技术课程-HQYJ-胡月\",\"text\":\"📇ARM基础与接口技术课程-HQYJ-胡月\"},{\"link\":\"/pages/📇系统移植课程-HQYJ-胡月\",\"text\":\"📇系统移植课程-HQYJ-胡月\"},{\"link\":\"/pages/📦归档\",\"text\":\"📦归档\"}]}],\"/public/\":[{\"collapsed\":false,\"items\":[{\"collapsed\":false,\"collapsible\":true,\"text\":\"templates\",\"items\":[{\"link\":\"/public/templates/daily_template\",\"text\":\"daily_template\"},{\"link\":\"/public/templates/mindmap_template\",\"text\":\"mindmap_template\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"mindmap\",\"items\":[{\"link\":\"/public/mindmap/day02_shell命令.html\",\"text\":\"day02_shell命令.html\"},{\"link\":\"/public/mindmap/day03_shell脚本.html\",\"text\":\"day03_shell脚本.html\"},{\"link\":\"/public/mindmap/day04_shell脚本.html\",\"text\":\"day04_shell脚本.html\"}]},{\"collapsed\":false,\"collapsible\":true,\"text\":\"images\",\"items\":[{\"link\":\"/public/images/favicon.ico\",\"text\":\"favicon.ico\"},{\"link\":\"/public/images/home.gif\",\"text\":\"home.gif\"},{\"link\":\"/public/images/logo.gif\",\"text\":\"logo.gif\"}]}],\"collapsible\":true,\"text\":\"public\"}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/zhuang-xd\"}],\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>